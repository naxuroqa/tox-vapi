<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>ToxAV &ndash; toxcore &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">ToxAV &ndash; toxcore Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">toxcore</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace">ToxAV</li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="enum"><a href="ToxAV.CallControl.html">CallControl</a></li>
          <li class="enum"><a href="ToxAV.ErrAnswer.html">ErrAnswer</a></li>
          <li class="enum"><a href="ToxAV.ErrBitRateSet.html">ErrBitRateSet</a></li>
          <li class="enum"><a href="ToxAV.ErrCall.html">ErrCall</a></li>
          <li class="enum"><a href="ToxAV.ErrCallControl.html">ErrCallControl</a></li>
          <li class="enum"><a href="ToxAV.ErrNew.html">ErrNew</a></li>
          <li class="enum"><a href="ToxAV.ErrSendFrame.html">ErrSendFrame</a></li>
          <li class="enum"><a href="ToxAV.FriendCallState.html">FriendCallState</a></li>
          <li class="class"><a href="ToxAV.ToxAV.html">ToxAV</a></li>
          <li class="delegate"><a href="ToxAV.AudioBitRateCallback.html">AudioBitRateCallback</a></li>
          <li class="delegate"><a href="ToxAV.AudioReceiveFrameCallback.html">AudioReceiveFrameCallback</a></li>
          <li class="delegate"><a href="ToxAV.CallCallback.html">CallCallback</a></li>
          <li class="delegate"><a href="ToxAV.CallStateCallback.html">CallStateCallback</a></li>
          <li class="delegate"><a href="ToxAV.GroupchatAudioReceiveFrameCallback.html">GroupchatAudioReceiveFrameCallback</a></li>
          <li class="delegate"><a href="ToxAV.VideoBitRateCallback.html">VideoBitRateCallback</a></li>
          <li class="delegate"><a href="ToxAV.VideoReceiveFrameCallback.html">VideoReceiveFrameCallback</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">ToxAV</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Description:</h2>
        <div class="description">
          <h2>Public audio/video API for Tox clients. </h2>
          <p>This API can handle multiple calls. Each call has its state, in very rare occasions the library can change the state of the call without 
            apps knowledge.</p>
          <h3>Events and callbacks </h3>
          <p>As in Core API, events are handled by callbacks. One callback can be registered per event. All events have a callback function type named
            `toxav_{event}_cb` and a function to register it named `toxav_callback_{event}`. Passing a NULL callback will result in no callback being 
            registered for that event. Only one callback per event can be registered, so if a client needs multiple event listeners, it needs to 
            implement the dispatch functionality itself. Unlike Core API, lack of some event handlers will cause the the library to drop calls before 
            they are started. Hanging up call from a callback causes undefined behaviour.</p>
          <h3>Threading implications </h3>
          <p>Unlike the Core API, this API is fully thread-safe. The library will ensure the proper synchronization of parallel calls.</p>
          <p>A common way to run ToxAV (multiple or single instance) is to have a thread, separate from tox instance thread, running a simple 
            toxav_iterate loop, sleeping for toxav_iteration_interval * milliseconds on each iteration.</p>
          <p>An important thing to note is that events are triggered from both tox and toxav thread (see above). Audio and video receive frame events 
            are triggered from toxav thread while all the other events are triggered from tox thread.</p>
          <p>Tox thread has priority with mutex mechanisms. Any api function can fail if mutexes are held by tox thread in which case they will set 
            SYNC error code.</p>
        </div>
        <h2 class="main_title">Content:</h2>
        <h3 class="main_title">Classes:</h3>
        <ul class="navi_inline">
          <li class="class"><a href="ToxAV.ToxAV.html">ToxAV</a> - <span class="brief_description">The ToxAV instance type. Each ToxAV instance can be
              bound to only one Tox instance, and Tox instance can have only one ToxAV instance. One must make sure to close ToxAV instance prior 
              closing Tox instance otherwise undefined behaviour occurs. Upon closing of ToxAV instance, all active calls will be forcibly terminated 
              without notifying peers.</span></li>
        </ul>
        <h3 class="main_title">Enums:</h3>
        <ul class="navi_inline">
          <li class="enum"><a href="ToxAV.CallControl.html">CallControl</a></li>
          <li class="enum"><a href="ToxAV.ErrAnswer.html">ErrAnswer</a></li>
          <li class="enum"><a href="ToxAV.ErrBitRateSet.html">ErrBitRateSet</a></li>
          <li class="enum"><a href="ToxAV.ErrCall.html">ErrCall</a></li>
          <li class="enum"><a href="ToxAV.ErrCallControl.html">ErrCallControl</a></li>
          <li class="enum"><a href="ToxAV.ErrNew.html">ErrNew</a></li>
          <li class="enum"><a href="ToxAV.ErrSendFrame.html">ErrSendFrame</a></li>
          <li class="enum"><a href="ToxAV.FriendCallState.html">FriendCallState</a></li>
        </ul>
        <h3 class="main_title">Delegates:</h3>
        <ul class="navi_inline">
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.AudioBitRateCallback.html" class="delegate">AudioBitRateCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_basic_type"><span class="struct">uint32</span></span> audio_bit_rate)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the audio_bit_rate callback. The event is 
                triggered when the network becomes too saturated for current bit rates at which point core suggests new bit rates.</span>
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.AudioReceiveFrameCallback.html" class="delegate">AudioReceiveFrameCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_basic_type"><span class="struct">int16</span></span>[] pcm, <span class="main_basic_type"><span class="struct">size_t</span></span> sample_count, <span class="main_basic_type"><span class="struct">uint8</span></span> channels, <span class="main_basic_type"><span class="struct">uint32</span></span> sampling_rate)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the audio_receive_frame callback. The callback 
                can be called multiple times per single iteration depending on the amount of queued frames in the buffer. The received format is the 
                same as in send function.</span>
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.CallCallback.html" class="delegate">CallCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_basic_type"><span class="struct">bool</span></span> audio_enabled, <span class="main_basic_type"><span class="struct">bool</span></span> video_enabled)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the call callback.</span>
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.CallStateCallback.html" class="delegate">CallStateCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_type"><a href="ToxAV.FriendCallState.html" class="enum">FriendCallState</a></span> state)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the call_state callback.</span>
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.GroupchatAudioReceiveFrameCallback.html" class="delegate">GroupchatAudioReceiveFrameCallback</a></b> (<span class="main_type"><a href="ToxCore.Tox.html" class="class">Tox</a></span> self, <span class="main_basic_type"><span class="struct">uint32</span></span> group_number, <span class="main_basic_type"><span class="struct">uint32</span></span> peer_number, <span class="main_basic_type"><span class="struct">int16</span></span>[] pcm, <span class="main_basic_type"><span class="struct">uint</span></span> samples, <span class="main_basic_type"><span class="struct">uint8</span></span> channels, <span class="main_basic_type"><span class="struct">uint32</span></span> sampling_rate)
            </span>
            <div class="leaf_brief_description">
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.VideoBitRateCallback.html" class="delegate">VideoBitRateCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_basic_type"><span class="struct">uint32</span></span> video_bit_rate)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the video_bit_rate callback. The event is 
                triggered when the network becomes too saturated for current bit rates at which point core suggests new bit rates.</span>
            </div></li>
          <li class="delegate"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">delegate</span> <span class="main_keyword">void</span> <b><a href="ToxAV.VideoReceiveFrameCallback.html" class="delegate">VideoReceiveFrameCallback</a></b> (<span class="main_type"><a href="ToxAV.ToxAV.html" class="class">ToxAV</a></span> av, <span class="main_basic_type"><span class="struct">uint32</span></span> friend_number, <span class="main_basic_type"><span class="struct">uint16</span></span> width, <span class="main_basic_type"><span class="struct">uint16</span></span> height, <span class="main_basic_type"><span class="struct">uint8</span></span>[] y, <span class="main_basic_type"><span class="struct">uint8</span></span>[] u, <span class="main_basic_type"><span class="struct">uint8</span></span>[] v, <span class="main_basic_type"><span class="struct">int32</span></span> ystride, <span class="main_basic_type"><span class="struct">int32</span></span> ustride, <span class="main_basic_type"><span class="struct">int32</span></span> vstride)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">The function type for the video_receive_frame callback.</span>
            </div></li>
        </ul>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="https://wiki.gnome.org/Projects/Valadoc"><kbd>valadoc</kbd></a>
    </div>
  </body>
</html>